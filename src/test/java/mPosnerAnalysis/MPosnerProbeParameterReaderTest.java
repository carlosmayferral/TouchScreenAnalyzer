package mPosnerAnalysis;

import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import dataModels.Event;

class MPosnerProbeParameterReaderTest {

	@BeforeEach
	void setUp() throws Exception {
	}

	@Test
	void read_parameters_determines_exogenous_if_position_present() {
		String input = "0,28,Input Definition,(SYSTEM),,0,5,Tray #1,0,BIRBeam #1,1,FIRBeam #1,2,RightFIRBeam #1,3,FeederFault #1,4\r\n"
				+ "0,28,Input Definition,(SYSTEM),,0,1,FeederReport #1,5,,,,,,,,\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,5,HouseLight #1,0,TrayLight #1,1,Feeder #1,2,Sound_On #1,3,White_Noise_Off #1,4\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,4,Sound #1,5,Sound #2,6,Sound #3,7,Feeder #2,8,,\r\n"
				+ "0,16,Variable Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A1Sound1,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A2Sound2,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,A3Sound3,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Accuracy_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aCounter_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Pause,,0,1,Value,2,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Analysed,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Anticipation_Error,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aTrial_Set,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,CentralStimulus_Position,,0,1,Value,4,,,,,,,,\r\n"
				+ "0,16,Variable Event,Change_Hold_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Correct_Percent,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Brightness,,0,1,Value,70,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time_Adjuster,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Feeder_Pulse_Time,,0,1,Value,280,,,,,,,,\r\n"
				+ "0,16,Variable Event,First_Analysis,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Failure_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Success_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time_Adjuster,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Houselight_Normally_On,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Incorrect_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Increment_this_trial,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_Hold_Time,,0,1,Value,0.2,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_No_AE,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,MinHold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_MTTime,,0,1,Value,2.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_RTTime,,0,1,Value,1.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,PunishAnticipationError,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Reward_counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,SkipTrial_inc,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Starting_Validity,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Timeout,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tone_Duration,,0,1,Value,1000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tray_Light_Pulse,,0,1,Value,2000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Counter_Min_Hold,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Type,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Validity,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_AnticipationError_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Correct_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Incorrect_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Omission_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzMT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzRT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,37,Image List Definition,Background,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Background,,0,1,Image 1,1,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Background,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,First_10_Trial,,0,2,Index,1,Value,113,,,,,,\r\n"
				+ "0,37,Image List Definition,Image,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Image,,0,5,CentralStimulus,1,Target,2,dim,3,Cue,4,Cue50,5\r\n"
				+ "0,36,List Array - Write,Image,,0,2,Cue25,6,Cue12.5,7,,,,,,\r\n"
				+ "0,17,List Change - Set,Image,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_CueBrightness,,0,2,Index,7,Value,25,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #1,131,Item #2,131,Item #3,131,Item #4,131,Item #5,131\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #6,313,Item #7,313,Item #8,313,Item #9,313,Item #10,313\r\n"
				+ "0,17,List Change - Set,Invalid_Trials,,0,2,Index,6,Value,313,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_CueBrightness,,0,2,Index,6,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,Valid_Trials,,0,2,Index,7,Value,331,,,,,,\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #1,1,Item #2,1,Item #3,0,Item #4,0,Item #5,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #6,0,Item #7,1,Item #8,0,Item #9,1,Item #10,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #11,0,Item #12,1,Item #13,0,Item #14,1,Item #15,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #16,0,Item #17,0,Item #18,1,Item #19,0,Item #20,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #21,0,Item #22,1,Item #23,0,Item #24,0,Item #25,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #26,1,Item #27,1,Item #28,0,Item #29,1,Item #30,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #31,0,Item #32,0,Item #33,0,Item #34,1,Item #35,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #36,0,Item #37,1,Item #38,0,Item #39,0,Item #40,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #41,1,Item #42,0,Item #43,0,Item #44,1,Item #45,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #46,1,Item #47,1,Item #48,0,Item #49,1,Item #50,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #51,1,Item #52,1,Item #53,0,Item #54,1,Item #55,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #56,0,Item #57,1,Item #58,0,Item #59,0,Item #60,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #61,1,Item #62,0,Item #63,1,Item #64,1,Item #65,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #66,1,Item #67,0,Item #68,1,Item #69,1,Item #70,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #71,1,Item #72,1,Item #73,0,Item #74,0,Item #75,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #76,1,Item #77,0,Item #78,1,Item #79,0,Item #80,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #81,0,Item #82,1,Item #83,1,Item #84,0,Item #85,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #86,1,Item #87,0,Item #88,1,Item #89,1,Item #90,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #91,1,Item #92,0,Item #93,1,Item #94,0,Item #95,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #96,0,Item #97,1,Item #98,1,Item #99,0,Item #100,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #101,0,Item #102,1,Item #103,1,Item #104,0,Item #105,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #106,1,Item #107,0,Item #108,1,Item #109,1,Item #110,0\r\n"
				+ "0,17,List Change - Set,Validity_List,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,0,Schedule Startup Event,(SYSTEM),,0,0,,,,,,,,,,\r\n"
				+ "0,29,Timer Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,21,Group Change Event,Group Change,,0,1,New Group,1,,,,,,,,\r\n"
				+ "0.005,1,Condition Event,Set Blank Images,,1,0,,,,,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,1,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,2,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,3,Image 1,0,,,,,,\r\n"
				+ "0.005,3,Output On Event,White_Noise_Off #1,,1,0,,,,,,,,,,\r\n"
				+ "0.005,21,Group Change Event,Group Change,,1,1,New Group,22,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Reset Sound Levels to Zero,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #1,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #2,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #3,,22,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,22,1,New Group,23,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Adjust Sound Level 2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,Sound #2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,NoTone Fall Through,,23,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,23,1,New Group,24,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Tone set,,24,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,24,1,New Group,2,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Free Feed,,2,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,TrayLight #1,,2,0,,,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Feeder #1,,2,1,Duration,0.28,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Sound_On #1,,2,1,Duration,1,,,,,,,,\r\n"
				+ "0.1,16,Variable Event,SkipTrial_inc,,2,1,Value,1,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,2,1,New Group,3,,,,,,,,";
		Event[] events = Event.readEventsFromString(input);
		MPosnerProbeParameterReader sut = new MPosnerProbeParameterReader();
		
		
		MPosnerProbeParameters parameters = (MPosnerProbeParameters)sut.readParameters(events);
		
		assertEquals(PosnerTrialType.Exogenous.name(), parameters.getTrialType());
	}
	
	@Test
	void read_parameters_determines_endogenous_if_position_absent() {
		String input = "0,28,Input Definition,(SYSTEM),,0,5,Tray #1,0,BIRBeam #1,1,FIRBeam #1,2,RightFIRBeam #1,3,FeederFault #1,4\r\n"
				+ "0,28,Input Definition,(SYSTEM),,0,1,FeederReport #1,5,,,,,,,,\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,5,HouseLight #1,0,TrayLight #1,1,Feeder #1,2,Sound_On #1,3,White_Noise_Off #1,4\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,4,Sound #1,5,Sound #2,6,Sound #3,7,Feeder #2,8,,\r\n"
				+ "0,16,Variable Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A1Sound1,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A2Sound2,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,A3Sound3,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Accuracy_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aCounter_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Pause,,0,1,Value,2,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Analysed,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Anticipation_Error,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aTrial_Set,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,CentralStimulus_Position,,0,1,Value,4,,,,,,,,\r\n"
				+ "0,16,Variable Event,Change_Hold_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Correct_Percent,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Brightness,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Left,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Right,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time_Adjuster,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Feeder_Pulse_Time,,0,1,Value,280,,,,,,,,\r\n"
				+ "0,16,Variable Event,First_Analysis,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Failure_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Success_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time_Adjuster,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Houselight_Normally_On,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Incorrect_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Increment_this_trial,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_Hold_Time,,0,1,Value,0.2,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_No_AE,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_no_reward,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,MinHold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_MTTime,,0,1,Value,2.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_RTTime,,0,1,Value,1.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,PunishAnticipationError,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Reward_counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,SkipTrial_inc,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Starting_Validity,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Timeout,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tone_Duration,,0,1,Value,1000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tray_Light_Pulse,,0,1,Value,2000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Counter_Min_Hold,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Type,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Validity,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_AnticipationError_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Correct_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Incorrect_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Omission_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzMT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzRT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,37,Image List Definition,Background,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Background,,0,1,Image 1,1,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Background,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,37,Image List Definition,Cue_Images,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Cue_Images,,0,5,RightCue,1,LeftCue,2,RightCue50,3,RightCue25,4,RightCue12.5,5\r\n"
				+ "0,36,List Array - Write,Cue_Images,,0,3,LeftCue50,6,LeftCue25,7,LeftCue12.5,8,,,,\r\n"
				+ "0,17,List Change - Set,Cue_Images,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #1,4531,Item #2,4531,Item #3,4531,Item #4,4531,Item #5,4531\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #6,14513,Item #7,14513,Item #8,14513,Item #9,14513,Item #10,14513\r\n"
				+ "0,17,List Change - Set,First_10_Trial,,0,2,Index,8,Value,14513,,,,,,\r\n"
				+ "0,37,Image List Definition,Image,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Image,,0,4,CentralStimulus,1,Target,2,dim,3,Cue,4,,\r\n"
				+ "0,17,List Change - Set,Image,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #1,100,Item #2,100,Item #3,100,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_CueBrightness,,0,2,Index,5,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #1,4513,Item #2,4513,Item #3,4513,Item #4,4513,Item #5,14531\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,3,Item #6,14531,Item #7,14531,Item #8,14531,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_Trials,,0,2,Index,3,Value,4513,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #1,100,Item #2,100,Item #3,100,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_CueBrightness,,0,2,Index,5,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #1,4531,Item #2,4531,Item #3,4531,Item #4,4531,Item #5,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #6,4531,Item #7,4531,Item #8,4531,Item #9,4531,Item #10,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #11,4531,Item #12,4531,Item #13,4531,Item #14,4531,Item #15,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #16,4531,Item #17,4531,Item #18,4531,Item #19,4531,Item #20,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #21,4531,Item #22,4531,Item #23,4531,Item #24,4531,Item #25,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #26,4531,Item #27,4531,Item #28,4531,Item #29,4531,Item #30,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #31,4531,Item #32,4531,Item #33,4531,Item #34,4531,Item #35,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #36,4531,Item #37,4531,Item #38,4531,Item #39,4531,Item #40,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #41,4531,Item #42,4531,Item #43,4531,Item #44,14513,Item #45,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #46,14513,Item #47,14513,Item #48,14513,Item #49,14513,Item #50,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #51,14513,Item #52,14513,Item #53,14513,Item #54,14513,Item #55,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #56,14513,Item #57,14513,Item #58,14513,Item #59,14513,Item #60,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #61,14513,Item #62,14513,Item #63,14513,Item #64,14513,Item #65,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #66,14513,Item #67,14513,Item #68,14513,Item #69,14513,Item #70,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #71,14513,Item #72,14513,Item #73,14513,Item #74,14513,Item #75,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #76,14513,Item #77,14513,Item #78,14513,Item #79,14513,Item #80,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #81,14513,Item #82,14513,Item #83,14513,Item #84,14513,Item #85,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,1,Item #86,14513,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_Trials,,0,2,Index,23,Value,4531,,,,,,\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #1,0,Item #2,0,Item #3,0,Item #4,1,Item #5,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #6,0,Item #7,0,Item #8,1,Item #9,0,Item #10,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #11,0,Item #12,0,Item #13,0,Item #14,1,Item #15,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #16,0,Item #17,0,Item #18,0,Item #19,0,Item #20,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #21,0,Item #22,0,Item #23,0,Item #24,1,Item #25,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #26,0,Item #27,0,Item #28,0,Item #29,0,Item #30,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #31,0,Item #32,0,Item #33,1,Item #34,0,Item #35,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #36,0,Item #37,1,Item #38,0,Item #39,0,Item #40,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #41,0,Item #42,0,Item #43,1,Item #44,0,Item #45,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #46,0,Item #47,0,Item #48,1,Item #49,0,Item #50,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #51,1,Item #52,0,Item #53,0,Item #54,0,Item #55,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #56,0,Item #57,0,Item #58,0,Item #59,0,Item #60,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #61,1,Item #62,0,Item #63,0,Item #64,0,Item #65,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #66,0,Item #67,1,Item #68,0,Item #69,0,Item #70,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #71,0,Item #72,0,Item #73,1,Item #74,0,Item #75,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #76,0,Item #77,1,Item #78,0,Item #79,0,Item #80,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #81,0,Item #82,1,Item #83,0,Item #84,0,Item #85,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #86,1,Item #87,0,Item #88,0,Item #89,0,Item #90,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #91,0,Item #92,0,Item #93,0,Item #94,0,Item #95,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #96,0,Item #97,0,Item #98,0,Item #99,0,Item #100,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #101,1,Item #102,0,Item #103,0,Item #104,1,Item #105,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #106,0,Item #107,0,Item #108,1,Item #109,0,Item #110,1\r\n"
				+ "0,17,List Change - Set,Validity_List,,0,2,Index,1,Value,0,,,,,,\r\n"
				+ "0,0,Schedule Startup Event,(SYSTEM),,0,0,,,,,,,,,,\r\n"
				+ "0,29,Timer Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,21,Group Change Event,Group Change,,0,1,New Group,1,,,,,,,,\r\n"
				+ "0.004,1,Condition Event,Set Blank Images,,1,0,,,,,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,1,Image 1,0,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,2,Image 1,0,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,3,Image 1,0,,,,,,\r\n"
				+ "0.004,3,Output On Event,White_Noise_Off #1,,1,0,,,,,,,,,,\r\n"
				+ "0.004,21,Group Change Event,Group Change,,1,1,New Group,22,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Reset Sound Levels to Zero,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #1,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #2,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #3,,22,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,22,1,New Group,23,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Adjust Sound Level 2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,Sound #2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,NoTone Fall Through,,23,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,23,1,New Group,24,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Tone set,,24,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,24,1,New Group,2,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Free Feed,,2,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,TrayLight #1,,2,0,,,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Feeder #1,,2,1,Duration,0.28,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Sound_On #1,,2,1,Duration,1,,,,,,,,\r\n"
				+ "0.1,16,Variable Event,SkipTrial_inc,,2,1,Value,1,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,2,1,New Group,3,,,,,,,,\r\n"
				+ "19.998,38,Input Transition On Event,Tray #1,,3,0,,,,,,,,,,\r\n"
				+ "19.998,1,Condition Event,Tray Entry starts first trial,,3,0,,,,,,,,,,\r\n"
				+ "19.998,4,Output Off Event,TrayLight #1,,3,0,,,,,,,,,,\r\n"
				+ "19.998,16,Variable Event,Trial_Type,,3,1,Value,14513,,,,,,,,\r\n"
				+ "19.998,19,List Change - Next Value,First_10_Trial,,3,2,Index,6,Value,14513,,,,,,\r\n"
				+ "19.998,16,Variable Event,Starting_Validity,,3,1,Value,12,,,,,,,,\r\n"
				+ "19.998,17,List Change - Set,Validity_List,,3,2,Index,12,Value,0,,,,,,";
		Event[] events = Event.readEventsFromString(input);
		MPosnerProbeParameterReader sut = new MPosnerProbeParameterReader();
		
		
		MPosnerProbeParameters parameters = (MPosnerProbeParameters)sut.readParameters(events);
		
		assertEquals(PosnerTrialType.Endogenous.name(), parameters.getTrialType());
	}
	
	@Test
	void read_parameters_determines_cue_time() {
		String input = "0,28,Input Definition,(SYSTEM),,0,5,Tray #1,0,BIRBeam #1,1,FIRBeam #1,2,RightFIRBeam #1,3,FeederFault #1,4\r\n"
				+ "0,28,Input Definition,(SYSTEM),,0,1,FeederReport #1,5,,,,,,,,\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,5,HouseLight #1,0,TrayLight #1,1,Feeder #1,2,Sound_On #1,3,White_Noise_Off #1,4\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,4,Sound #1,5,Sound #2,6,Sound #3,7,Feeder #2,8,,\r\n"
				+ "0,16,Variable Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A1Sound1,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A2Sound2,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,A3Sound3,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Accuracy_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aCounter_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Pause,,0,1,Value,2,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Analysed,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Anticipation_Error,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aTrial_Set,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,CentralStimulus_Position,,0,1,Value,4,,,,,,,,\r\n"
				+ "0,16,Variable Event,Change_Hold_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Correct_Percent,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Brightness,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Left,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Right,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time_Adjuster,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Feeder_Pulse_Time,,0,1,Value,280,,,,,,,,\r\n"
				+ "0,16,Variable Event,First_Analysis,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Failure_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Success_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time_Adjuster,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Houselight_Normally_On,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Incorrect_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Increment_this_trial,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_Hold_Time,,0,1,Value,0.2,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_No_AE,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_no_reward,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,MinHold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_MTTime,,0,1,Value,2.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_RTTime,,0,1,Value,1.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,PunishAnticipationError,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Reward_counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,SkipTrial_inc,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Starting_Validity,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Timeout,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tone_Duration,,0,1,Value,1000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tray_Light_Pulse,,0,1,Value,2000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Counter_Min_Hold,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Type,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Validity,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_AnticipationError_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Correct_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Incorrect_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Omission_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzMT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzRT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,37,Image List Definition,Background,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Background,,0,1,Image 1,1,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Background,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,37,Image List Definition,Cue_Images,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Cue_Images,,0,5,RightCue,1,LeftCue,2,RightCue50,3,RightCue25,4,RightCue12.5,5\r\n"
				+ "0,36,List Array - Write,Cue_Images,,0,3,LeftCue50,6,LeftCue25,7,LeftCue12.5,8,,,,\r\n"
				+ "0,17,List Change - Set,Cue_Images,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #1,4531,Item #2,4531,Item #3,4531,Item #4,4531,Item #5,4531\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #6,14513,Item #7,14513,Item #8,14513,Item #9,14513,Item #10,14513\r\n"
				+ "0,17,List Change - Set,First_10_Trial,,0,2,Index,8,Value,14513,,,,,,\r\n"
				+ "0,37,Image List Definition,Image,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Image,,0,4,CentralStimulus,1,Target,2,dim,3,Cue,4,,\r\n"
				+ "0,17,List Change - Set,Image,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #1,100,Item #2,100,Item #3,100,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_CueBrightness,,0,2,Index,5,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #1,4513,Item #2,4513,Item #3,4513,Item #4,4513,Item #5,14531\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,3,Item #6,14531,Item #7,14531,Item #8,14531,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_Trials,,0,2,Index,3,Value,4513,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #1,100,Item #2,100,Item #3,100,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_CueBrightness,,0,2,Index,5,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #1,4531,Item #2,4531,Item #3,4531,Item #4,4531,Item #5,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #6,4531,Item #7,4531,Item #8,4531,Item #9,4531,Item #10,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #11,4531,Item #12,4531,Item #13,4531,Item #14,4531,Item #15,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #16,4531,Item #17,4531,Item #18,4531,Item #19,4531,Item #20,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #21,4531,Item #22,4531,Item #23,4531,Item #24,4531,Item #25,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #26,4531,Item #27,4531,Item #28,4531,Item #29,4531,Item #30,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #31,4531,Item #32,4531,Item #33,4531,Item #34,4531,Item #35,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #36,4531,Item #37,4531,Item #38,4531,Item #39,4531,Item #40,4531\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #41,4531,Item #42,4531,Item #43,4531,Item #44,14513,Item #45,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #46,14513,Item #47,14513,Item #48,14513,Item #49,14513,Item #50,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #51,14513,Item #52,14513,Item #53,14513,Item #54,14513,Item #55,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #56,14513,Item #57,14513,Item #58,14513,Item #59,14513,Item #60,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #61,14513,Item #62,14513,Item #63,14513,Item #64,14513,Item #65,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #66,14513,Item #67,14513,Item #68,14513,Item #69,14513,Item #70,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #71,14513,Item #72,14513,Item #73,14513,Item #74,14513,Item #75,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #76,14513,Item #77,14513,Item #78,14513,Item #79,14513,Item #80,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #81,14513,Item #82,14513,Item #83,14513,Item #84,14513,Item #85,14513\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,1,Item #86,14513,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_Trials,,0,2,Index,23,Value,4531,,,,,,\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #1,0,Item #2,0,Item #3,0,Item #4,1,Item #5,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #6,0,Item #7,0,Item #8,1,Item #9,0,Item #10,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #11,0,Item #12,0,Item #13,0,Item #14,1,Item #15,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #16,0,Item #17,0,Item #18,0,Item #19,0,Item #20,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #21,0,Item #22,0,Item #23,0,Item #24,1,Item #25,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #26,0,Item #27,0,Item #28,0,Item #29,0,Item #30,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #31,0,Item #32,0,Item #33,1,Item #34,0,Item #35,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #36,0,Item #37,1,Item #38,0,Item #39,0,Item #40,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #41,0,Item #42,0,Item #43,1,Item #44,0,Item #45,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #46,0,Item #47,0,Item #48,1,Item #49,0,Item #50,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #51,1,Item #52,0,Item #53,0,Item #54,0,Item #55,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #56,0,Item #57,0,Item #58,0,Item #59,0,Item #60,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #61,1,Item #62,0,Item #63,0,Item #64,0,Item #65,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #66,0,Item #67,1,Item #68,0,Item #69,0,Item #70,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #71,0,Item #72,0,Item #73,1,Item #74,0,Item #75,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #76,0,Item #77,1,Item #78,0,Item #79,0,Item #80,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #81,0,Item #82,1,Item #83,0,Item #84,0,Item #85,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #86,1,Item #87,0,Item #88,0,Item #89,0,Item #90,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #91,0,Item #92,0,Item #93,0,Item #94,0,Item #95,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #96,0,Item #97,0,Item #98,0,Item #99,0,Item #100,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #101,1,Item #102,0,Item #103,0,Item #104,1,Item #105,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #106,0,Item #107,0,Item #108,1,Item #109,0,Item #110,1\r\n"
				+ "0,17,List Change - Set,Validity_List,,0,2,Index,1,Value,0,,,,,,\r\n"
				+ "0,0,Schedule Startup Event,(SYSTEM),,0,0,,,,,,,,,,\r\n"
				+ "0,29,Timer Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,21,Group Change Event,Group Change,,0,1,New Group,1,,,,,,,,\r\n"
				+ "0.004,1,Condition Event,Set Blank Images,,1,0,,,,,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,1,Image 1,0,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,2,Image 1,0,,,,,,\r\n"
				+ "0.004,32,Whisker - Display Image,Posner task,Background,1,2,Position,3,Image 1,0,,,,,,\r\n"
				+ "0.004,3,Output On Event,White_Noise_Off #1,,1,0,,,,,,,,,,\r\n"
				+ "0.004,21,Group Change Event,Group Change,,1,1,New Group,22,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Reset Sound Levels to Zero,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #1,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #2,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #3,,22,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,22,1,New Group,23,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Adjust Sound Level 2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,Sound #2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,NoTone Fall Through,,23,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,23,1,New Group,24,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Tone set,,24,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,24,1,New Group,2,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Free Feed,,2,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,TrayLight #1,,2,0,,,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Feeder #1,,2,1,Duration,0.28,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Sound_On #1,,2,1,Duration,1,,,,,,,,\r\n"
				+ "0.1,16,Variable Event,SkipTrial_inc,,2,1,Value,1,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,2,1,New Group,3,,,,,,,,\r\n"
				+ "19.998,38,Input Transition On Event,Tray #1,,3,0,,,,,,,,,,\r\n"
				+ "19.998,1,Condition Event,Tray Entry starts first trial,,3,0,,,,,,,,,,\r\n"
				+ "19.998,4,Output Off Event,TrayLight #1,,3,0,,,,,,,,,,\r\n"
				+ "19.998,16,Variable Event,Trial_Type,,3,1,Value,14513,,,,,,,,\r\n"
				+ "19.998,19,List Change - Next Value,First_10_Trial,,3,2,Index,6,Value,14513,,,,,,\r\n"
				+ "19.998,16,Variable Event,Starting_Validity,,3,1,Value,12,,,,,,,,\r\n"
				+ "19.998,17,List Change - Set,Validity_List,,3,2,Index,12,Value,0,,,,,,";
		Event[] events = Event.readEventsFromString(input);
		MPosnerProbeParameterReader sut = new MPosnerProbeParameterReader();
		
		
		MPosnerProbeParameters parameters = (MPosnerProbeParameters)sut.readParameters(events);
		
		assertEquals(.150d, parameters.getCueTime(), .001d);
	}
	
	@Test
	void read_parameters_determines_hold_time() {
		String input = "0,28,Input Definition,(SYSTEM),,0,5,Tray #1,0,BIRBeam #1,1,FIRBeam #1,2,RightFIRBeam #1,3,FeederFault #1,4\r\n"
				+ "0,28,Input Definition,(SYSTEM),,0,1,FeederReport #1,5,,,,,,,,\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,5,HouseLight #1,0,TrayLight #1,1,Feeder #1,2,Sound_On #1,3,White_Noise_Off #1,4\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,4,Sound #1,5,Sound #2,6,Sound #3,7,Feeder #2,8,,\r\n"
				+ "0,16,Variable Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A1Sound1,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A2Sound2,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,A3Sound3,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Accuracy_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aCounter_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Pause,,0,1,Value,2,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Analysed,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Anticipation_Error,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aTrial_Set,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,CentralStimulus_Position,,0,1,Value,4,,,,,,,,\r\n"
				+ "0,16,Variable Event,Change_Hold_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Correct_Percent,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Brightness,,0,1,Value,70,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time_Adjuster,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Feeder_Pulse_Time,,0,1,Value,280,,,,,,,,\r\n"
				+ "0,16,Variable Event,First_Analysis,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Failure_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Success_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time_Adjuster,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Houselight_Normally_On,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Incorrect_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Increment_this_trial,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_Hold_Time,,0,1,Value,0.2,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_No_AE,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,MinHold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_MTTime,,0,1,Value,2.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_RTTime,,0,1,Value,1.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,PunishAnticipationError,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Reward_counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,SkipTrial_inc,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Starting_Validity,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Timeout,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tone_Duration,,0,1,Value,1000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tray_Light_Pulse,,0,1,Value,2000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Counter_Min_Hold,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Type,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Validity,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_AnticipationError_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Correct_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Incorrect_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Omission_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzMT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzRT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,37,Image List Definition,Background,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Background,,0,1,Image 1,1,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Background,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,First_10_Trial,,0,2,Index,1,Value,113,,,,,,\r\n"
				+ "0,37,Image List Definition,Image,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Image,,0,5,CentralStimulus,1,Target,2,dim,3,Cue,4,Cue50,5\r\n"
				+ "0,36,List Array - Write,Image,,0,2,Cue25,6,Cue12.5,7,,,,,,\r\n"
				+ "0,17,List Change - Set,Image,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_CueBrightness,,0,2,Index,7,Value,25,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #1,131,Item #2,131,Item #3,131,Item #4,131,Item #5,131\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #6,313,Item #7,313,Item #8,313,Item #9,313,Item #10,313\r\n"
				+ "0,17,List Change - Set,Invalid_Trials,,0,2,Index,6,Value,313,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_CueBrightness,,0,2,Index,6,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,Valid_Trials,,0,2,Index,7,Value,331,,,,,,\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #1,1,Item #2,1,Item #3,0,Item #4,0,Item #5,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #6,0,Item #7,1,Item #8,0,Item #9,1,Item #10,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #11,0,Item #12,1,Item #13,0,Item #14,1,Item #15,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #16,0,Item #17,0,Item #18,1,Item #19,0,Item #20,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #21,0,Item #22,1,Item #23,0,Item #24,0,Item #25,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #26,1,Item #27,1,Item #28,0,Item #29,1,Item #30,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #31,0,Item #32,0,Item #33,0,Item #34,1,Item #35,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #36,0,Item #37,1,Item #38,0,Item #39,0,Item #40,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #41,1,Item #42,0,Item #43,0,Item #44,1,Item #45,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #46,1,Item #47,1,Item #48,0,Item #49,1,Item #50,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #51,1,Item #52,1,Item #53,0,Item #54,1,Item #55,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #56,0,Item #57,1,Item #58,0,Item #59,0,Item #60,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #61,1,Item #62,0,Item #63,1,Item #64,1,Item #65,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #66,1,Item #67,0,Item #68,1,Item #69,1,Item #70,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #71,1,Item #72,1,Item #73,0,Item #74,0,Item #75,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #76,1,Item #77,0,Item #78,1,Item #79,0,Item #80,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #81,0,Item #82,1,Item #83,1,Item #84,0,Item #85,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #86,1,Item #87,0,Item #88,1,Item #89,1,Item #90,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #91,1,Item #92,0,Item #93,1,Item #94,0,Item #95,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #96,0,Item #97,1,Item #98,1,Item #99,0,Item #100,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #101,0,Item #102,1,Item #103,1,Item #104,0,Item #105,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #106,1,Item #107,0,Item #108,1,Item #109,1,Item #110,0\r\n"
				+ "0,17,List Change - Set,Validity_List,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,0,Schedule Startup Event,(SYSTEM),,0,0,,,,,,,,,,\r\n"
				+ "0,29,Timer Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,21,Group Change Event,Group Change,,0,1,New Group,1,,,,,,,,\r\n"
				+ "0.005,1,Condition Event,Set Blank Images,,1,0,,,,,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,1,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,2,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,3,Image 1,0,,,,,,\r\n"
				+ "0.005,3,Output On Event,White_Noise_Off #1,,1,0,,,,,,,,,,\r\n"
				+ "0.005,21,Group Change Event,Group Change,,1,1,New Group,22,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Reset Sound Levels to Zero,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #1,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #2,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #3,,22,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,22,1,New Group,23,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Adjust Sound Level 2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,Sound #2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,NoTone Fall Through,,23,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,23,1,New Group,24,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Tone set,,24,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,24,1,New Group,2,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Free Feed,,2,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,TrayLight #1,,2,0,,,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Feeder #1,,2,1,Duration,0.28,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Sound_On #1,,2,1,Duration,1,,,,,,,,\r\n"
				+ "0.1,16,Variable Event,SkipTrial_inc,,2,1,Value,1,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,2,1,New Group,3,,,,,,,,\r\n"
				+ "34.831,38,Input Transition On Event,Tray #1,,3,0,,,,,,,,,,\r\n"
				+ "34.831,1,Condition Event,Tray Entry starts first trial,,3,0,,,,,,,,,,";
		Event[] events = Event.readEventsFromString(input);
		MPosnerProbeParameterReader sut = new MPosnerProbeParameterReader();
		
		
		MPosnerProbeParameters parameters = (MPosnerProbeParameters)sut.readParameters(events);
		
		assertEquals(.175d, parameters.getHoldTime(), .001d);
	}
	
	@Test
	void read_parameters_determines_target_time() {
		String input = "0,28,Input Definition,(SYSTEM),,0,5,Tray #1,0,BIRBeam #1,1,FIRBeam #1,2,RightFIRBeam #1,3,FeederFault #1,4\r\n"
				+ "0,28,Input Definition,(SYSTEM),,0,1,FeederReport #1,5,,,,,,,,\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,5,HouseLight #1,0,TrayLight #1,1,Feeder #1,2,Sound_On #1,3,White_Noise_Off #1,4\r\n"
				+ "0,27,Output Definition,(SYSTEM),,0,4,Sound #1,5,Sound #2,6,Sound #3,7,Feeder #2,8,,\r\n"
				+ "0,16,Variable Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,_Trial_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A1Sound1,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,A2Sound2,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,A3Sound3,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Accuracy_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aCounter_NoAE,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Pause,,0,1,Value,2,,,,,,,,\r\n"
				+ "0,16,Variable Event,After_Reward_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Analysed,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Anticipation_Error,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,aTrial_Set,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,CentralStimulus_Position,,0,1,Value,4,,,,,,,,\r\n"
				+ "0,16,Variable Event,Change_Hold_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Correct_Percent,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Brightness,,0,1,Value,70,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Cue_Time_Adjuster,,0,1,Value,0.15,,,,,,,,\r\n"
				+ "0,16,Variable Event,Feeder_Pulse_Time,,0,1,Value,280,,,,,,,,\r\n"
				+ "0,16,Variable Event,First_Analysis,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Failure_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Success_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Time_Adjuster,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Hold_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Houselight_Normally_On,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Incorrect_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Increment_this_trial,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,ITI_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_Hold_Time,,0,1,Value,0.2,,,,,,,,\r\n"
				+ "0,16,Variable Event,Max_No_AE,,0,1,Value,120,,,,,,,,\r\n"
				+ "0,16,Variable Event,MinHold_Time,,0,1,Value,0.175,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_MTTime,,0,1,Value,2.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Omission_RTTime,,0,1,Value,1.5,,,,,,,,\r\n"
				+ "0,16,Variable Event,PunishAnticipationError,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Reward_counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,SkipTrial_inc,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Starting_Validity,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Position,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Time,,0,1,Value,1,,,,,,,,\r\n"
				+ "0,16,Variable Event,Target_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out,,0,1,Value,5,,,,,,,,\r\n"
				+ "0,16,Variable Event,Time_Out_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Timeout,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tone_Duration,,0,1,Value,1000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Tray_Light_Pulse,,0,1,Value,2000,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Counter_Min_Hold,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Trial_Type,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,Validity,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_AnticipationError_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Correct_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Incorrect_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zz_Omission_Counter,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzMT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,16,Variable Event,zzRT_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,37,Image List Definition,Background,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Background,,0,1,Image 1,1,,,,,,,,\r\n"
				+ "0,17,List Change - Set,Background,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,First_10_Trial,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,First_10_Trial,,0,2,Index,1,Value,113,,,,,,\r\n"
				+ "0,37,Image List Definition,Image,,0,1,Posner task,5,,,,,,,,\r\n"
				+ "0,36,List Array - Write,Image,,0,5,CentralStimulus,1,Target,2,dim,3,Cue,4,Cue50,5\r\n"
				+ "0,36,List Array - Write,Image,,0,2,Cue25,6,Cue12.5,7,,,,,,\r\n"
				+ "0,17,List Change - Set,Image,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Invalid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Invalid_CueBrightness,,0,2,Index,7,Value,25,,,,,,\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #1,131,Item #2,131,Item #3,131,Item #4,131,Item #5,131\r\n"
				+ "0,22,List Array - Write,Invalid_Trials,,0,5,Item #6,313,Item #7,313,Item #8,313,Item #9,313,Item #10,313\r\n"
				+ "0,17,List Change - Set,Invalid_Trials,,0,2,Index,6,Value,313,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #1,70,Item #2,70,Item #3,70,Item #4,50,Item #5,50\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,5,Item #6,50,Item #7,25,Item #8,25,Item #9,25,Item #10,12.5\r\n"
				+ "0,22,List Array - Write,Valid_CueBrightness,,0,2,Item #11,12.5,Item #12,12.5,,,,,,\r\n"
				+ "0,17,List Change - Set,Valid_CueBrightness,,0,2,Index,6,Value,50,,,,,,\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #1,113,Item #2,113,Item #3,113,Item #4,113,Item #5,113\r\n"
				+ "0,22,List Array - Write,Valid_Trials,,0,5,Item #6,331,Item #7,331,Item #8,331,Item #9,331,Item #10,331\r\n"
				+ "0,17,List Change - Set,Valid_Trials,,0,2,Index,7,Value,331,,,,,,\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #1,1,Item #2,1,Item #3,0,Item #4,0,Item #5,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #6,0,Item #7,1,Item #8,0,Item #9,1,Item #10,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #11,0,Item #12,1,Item #13,0,Item #14,1,Item #15,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #16,0,Item #17,0,Item #18,1,Item #19,0,Item #20,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #21,0,Item #22,1,Item #23,0,Item #24,0,Item #25,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #26,1,Item #27,1,Item #28,0,Item #29,1,Item #30,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #31,0,Item #32,0,Item #33,0,Item #34,1,Item #35,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #36,0,Item #37,1,Item #38,0,Item #39,0,Item #40,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #41,1,Item #42,0,Item #43,0,Item #44,1,Item #45,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #46,1,Item #47,1,Item #48,0,Item #49,1,Item #50,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #51,1,Item #52,1,Item #53,0,Item #54,1,Item #55,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #56,0,Item #57,1,Item #58,0,Item #59,0,Item #60,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #61,1,Item #62,0,Item #63,1,Item #64,1,Item #65,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #66,1,Item #67,0,Item #68,1,Item #69,1,Item #70,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #71,1,Item #72,1,Item #73,0,Item #74,0,Item #75,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #76,1,Item #77,0,Item #78,1,Item #79,0,Item #80,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #81,0,Item #82,1,Item #83,1,Item #84,0,Item #85,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #86,1,Item #87,0,Item #88,1,Item #89,1,Item #90,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #91,1,Item #92,0,Item #93,1,Item #94,0,Item #95,0\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #96,0,Item #97,1,Item #98,1,Item #99,0,Item #100,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #101,0,Item #102,1,Item #103,1,Item #104,0,Item #105,1\r\n"
				+ "0,22,List Array - Write,Validity_List,,0,5,Item #106,1,Item #107,0,Item #108,1,Item #109,1,Item #110,0\r\n"
				+ "0,17,List Change - Set,Validity_List,,0,2,Index,1,Value,1,,,,,,\r\n"
				+ "0,0,Schedule Startup Event,(SYSTEM),,0,0,,,,,,,,,,\r\n"
				+ "0,29,Timer Event,_Schedule_Timer,,0,1,Value,0,,,,,,,,\r\n"
				+ "0,21,Group Change Event,Group Change,,0,1,New Group,1,,,,,,,,\r\n"
				+ "0.005,1,Condition Event,Set Blank Images,,1,0,,,,,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,1,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,2,Image 1,0,,,,,,\r\n"
				+ "0.005,32,Whisker - Display Image,Posner task,Background,1,2,Position,3,Image 1,0,,,,,,\r\n"
				+ "0.005,3,Output On Event,White_Noise_Off #1,,1,0,,,,,,,,,,\r\n"
				+ "0.005,21,Group Change Event,Group Change,,1,1,New Group,22,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Reset Sound Levels to Zero,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #1,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #2,,22,0,,,,,,,,,,\r\n"
				+ "0.1,4,Output Off Event,Sound #3,,22,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,22,1,New Group,23,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Adjust Sound Level 2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,Sound #2,,23,0,,,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,NoTone Fall Through,,23,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,23,1,New Group,24,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Tone set,,24,0,,,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,24,1,New Group,2,,,,,,,,\r\n"
				+ "0.1,1,Condition Event,Free Feed,,2,0,,,,,,,,,,\r\n"
				+ "0.1,3,Output On Event,TrayLight #1,,2,0,,,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Feeder #1,,2,1,Duration,0.28,,,,,,,,\r\n"
				+ "0.1,7,Pulse Output Event,Sound_On #1,,2,1,Duration,1,,,,,,,,\r\n"
				+ "0.1,16,Variable Event,SkipTrial_inc,,2,1,Value,1,,,,,,,,\r\n"
				+ "0.1,21,Group Change Event,Group Change,,2,1,New Group,3,,,,,,,,\r\n"
				+ "34.831,38,Input Transition On Event,Tray #1,,3,0,,,,,,,,,,\r\n"
				+ "34.831,1,Condition Event,Tray Entry starts first trial,,3,0,,,,,,,,,,";
		Event[] events = Event.readEventsFromString(input);
		MPosnerProbeParameterReader sut = new MPosnerProbeParameterReader();
		
		
		MPosnerProbeParameters parameters = (MPosnerProbeParameters)sut.readParameters(events);
		
		assertEquals(1.0d, parameters.getTargetTime(), .001d);
	}

}
